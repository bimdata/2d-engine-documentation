<!DOCTYPE html>
<html lang="en-US">
  <head>
    <link rel="icon" href="/assets/img/favicon.svg" type="image/svg+xml"><title>Reference | 2D Engine</title><meta name="description" content="The official documentation for the BIMData.io 2D Engine."><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.15">
    <link rel="preload" href="/assets/js/runtime~app.7b1596e0.js" as="script"><link rel="preload" href="/assets/css/styles.55e56b69.css" as="style"><link rel="preload" href="/assets/js/346.9389faae.js" as="script"><link rel="preload" href="/assets/js/app.64756ebe.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.55e56b69.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/" class=""><img class="logo" src="/assets/img/documentation.svg" alt="2D Engine"><span class="site-name can-hide">2D Engine</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/guide/" class="nav-link" aria-label="Guide"><!--[--><!--]--> Guide <!--[--><!--]--></a></div><div class="navbar-links-item"><a aria-current="page" href="/reference/" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="Reference"><!--[--><!--]--> Reference <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/bimdata/2d-engine-documentation" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/guide/" class="nav-link" aria-label="Guide"><!--[--><!--]--> Guide <!--[--><!--]--></a></div><div class="navbar-links-item"><a aria-current="page" href="/reference/" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="Reference"><!--[--><!--]--> Reference <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/bimdata/2d-engine-documentation" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><section class="sidebar-group"><p class="sidebar-heading">Reference</p><ul class=""><li><!--[--><a aria-current="page" href="/reference/#init-factory" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Init factory"><!--[--><!--]--> Init factory <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/reference/#scene" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Scene"><!--[--><!--]--> Scene <!--[--><!--]--></a><ul class="sidebar-sub-headers"><li><!--[--><a aria-current="page" href="/reference/#events" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Events"><!--[--><!--]--> Events <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/reference/#styles" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Styles"><!--[--><!--]--> Styles <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/reference/#texture-manager" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Texture Manager"><!--[--><!--]--> Texture Manager <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/reference/#model-and-objects" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Model and Objects"><!--[--><!--]--> Model and Objects <!--[--><!--]--></a><ul class="sidebar-sub-headers"><li><!--[--><a aria-current="page" href="/reference/#model" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Model"><!--[--><!--]--> Model <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/reference/#object" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Object"><!--[--><!--]--> Object <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/reference/#geometry" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Geometry"><!--[--><!--]--> Geometry <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/reference/#positionable-transformable" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Positionable &amp; Transformable"><!--[--><!--]--> Positionable &amp; Transformable <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/reference/#ui" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="UI"><!--[--><!--]--> UI <!--[--><!--]--></a><ul class="sidebar-sub-headers"><li><!--[--><a aria-current="page" href="/reference/#events-1" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Events"><!--[--><!--]--> Events <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/reference/#camera" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Camera"><!--[--><!--]--> Camera <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/reference/#picker" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Picker"><!--[--><!--]--> Picker <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/reference/#snapper" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Snapper"><!--[--><!--]--> Snapper <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/reference/#settings" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Settings"><!--[--><!--]--> Settings <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/reference/#ticker" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Ticker"><!--[--><!--]--> Ticker <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/reference/#renderer" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Renderer"><!--[--><!--]--> Renderer <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/reference/#vector2dutils" class="router-link-active router-link-exact-active nav-link sidebar-link" aria-label="Vector2DUtils"><!--[--><!--]--> Vector2DUtils <!--[--><!--]--></a><!----><!--]--></li></ul></section><!--]--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="reference"><a class="header-anchor" href="#reference">#</a> Reference</h1><h2 id="init-factory"><a class="header-anchor" href="#init-factory">#</a> Init factory</h2><p>2D Engine is created using a factory you get as default export from the package:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> makeViewer <span class="token keyword">from</span> <span class="token string">&quot;@bimdata/2d-engine&quot;</span><span class="token punctuation">;</span> <span class="token comment">// webpack / rollup</span>

<span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> viewer <span class="token operator">=</span> <span class="token function">makeViewer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> canvas <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>canvas</code> is mandatory and another properties can be passed to customized the 2D Engine behavior:</p><table><thead><tr><th style="text-align:left;">Property</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;"><code>canvas</code></td><td style="text-align:left;"><code>HTMLCanvasElement</code></td><td style="text-align:left;"><strong>Required</strong>.</td></tr><tr><td style="text-align:left;"><code>autoStart</code></td><td style="text-align:left;"><code>boolean</code></td><td style="text-align:left;"><strong>Default</strong> = <code>true</code>. If false, you must call <code>viewer.ticker.start()</code> to start rendering.</td></tr><tr><td style="text-align:left;"><code>select</code></td><td style="text-align:left;"><code>boolean</code></td><td style="text-align:left;"><strong>Default</strong> = <code>true</code>. If false, disabled the <code>select</code> layer.</td></tr><tr><td style="text-align:left;"><code>highlight</code></td><td style="text-align:left;"><code>boolean</code></td><td style="text-align:left;"><strong>Default</strong> = <code>true</code>. If false, disabled the <code>highlight</code> layer.</td></tr><tr><td style="text-align:left;"><code>picking</code></td><td style="text-align:left;"><code>boolean</code></td><td style="text-align:left;"><strong>Default</strong> = <code>true</code>. If false, disabled the <code>picking</code> layer.</td></tr><tr><td style="text-align:left;"><code>snap</code></td><td style="text-align:left;"><code>boolean</code></td><td style="text-align:left;"><strong>Default</strong> = <code>true</code>. If false, disabled the <code>snap</code> layer.</td></tr></tbody></table><p>The factory returns the <code>viewer</code> with the following interface:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Viewer</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> canvas<span class="token operator">:</span> HTMLCanvasElement<span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> scene<span class="token operator">:</span> Scene<span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> camera<span class="token operator">:</span> Camera<span class="token punctuation">;</span>
  <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> renderer<span class="token operator">:</span> Renderer<span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> textureManager<span class="token operator">:</span> TextureManager<span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> styles<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> Style<span class="token punctuation">;</span> selected<span class="token operator">:</span> Style<span class="token punctuation">;</span> highlight<span class="token operator">:</span> Style <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> settings<span class="token operator">:</span> Settings<span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> constants<span class="token operator">:</span> Constants<span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> picker<span class="token operator">:</span> Picker<span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> snapper<span class="token operator">:</span> Snapper<span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> ticker<span class="token operator">:</span> Ticker<span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> ui<span class="token operator">:</span> <span class="token constant">UI</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> utils<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> vector2D<span class="token operator">:</span> Vector2DUtils<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="scene"><a class="header-anchor" href="#scene">#</a> Scene</h2><p>The viewer scene is where model and objects lives. You can add/remove models and objects and getters and setters allow read/write objects in batch.</p><p>It has the following interface:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Scene</span> <span class="token keyword">extends</span> <span class="token class-name">Readonly<span class="token operator">&lt;</span>EventHandler<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> viewer<span class="token operator">:</span> Viewer<span class="token punctuation">;</span>

  <span class="token comment">// Models</span>
  <span class="token keyword">readonly</span> models<span class="token operator">:</span> Model<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> modelsMap<span class="token operator">:</span> Map<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">,</span> Model<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token function">addModel</span><span class="token punctuation">(</span>modelData<span class="token operator">:</span> ModelData<span class="token punctuation">)</span><span class="token operator">:</span> Model<span class="token punctuation">;</span>
  <span class="token function">removeModel</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>

  <span class="token comment">// Objects</span>
  <span class="token keyword">readonly</span> objects<span class="token operator">:</span> SceneObject<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> objectsMap<span class="token operator">:</span> Map<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">,</span> SceneObject<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token function">addObject</span><span class="token punctuation">(</span>objectData<span class="token operator">:</span> SceneObjectData<span class="token punctuation">,</span> model<span class="token operator">?</span><span class="token operator">:</span> Model<span class="token punctuation">)</span><span class="token operator">:</span> SceneObject<span class="token punctuation">;</span>
  <span class="token function">removeObject</span><span class="token punctuation">(</span>objectId<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>

  <span class="token comment">// Objects setters</span>
  <span class="token function">showObjects</span><span class="token punctuation">(</span>ids<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">hideObjects</span><span class="token punctuation">(</span>ids<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">selectObjects</span><span class="token punctuation">(</span>ids<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">deselectObjects</span><span class="token punctuation">(</span>ids<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">highlightObjects</span><span class="token punctuation">(</span>ids<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">unhighlightObjects</span><span class="token punctuation">(</span>ids<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">setObjectsPickable</span><span class="token punctuation">(</span>ids<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">setObjectsUnpickable</span><span class="token punctuation">(</span>ids<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

  <span class="token comment">// Object getters</span>
  <span class="token keyword">readonly</span> shownObjects<span class="token operator">:</span> SceneObject<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> hiddenObjects<span class="token operator">:</span> SceneObject<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> selectedObjects<span class="token operator">:</span> SceneObject<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> unselectedObjects<span class="token operator">:</span> SceneObject<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> highlightedObjects<span class="token operator">:</span> SceneObject<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> unhighlightedObjects<span class="token operator">:</span> SceneObject<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> pickableObjects<span class="token operator">:</span> SceneObject<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> unpickableObjects<span class="token operator">:</span> SceneObject<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="events"><a class="header-anchor" href="#events">#</a> Events</h3><p>The following events are emitted by the 2D Engine scene :</p><ul><li>&quot;model-added&quot;, payload: the added model.</li><li>&quot;model-removed&quot;, payload: the removed model.</li><li>&quot;object-added&quot;, payload: the added object.</li><li>&quot;object-removed&quot;, payload: the removed object.</li><li>&quot;object-update&quot;, payload: { object, property, value?, oldValue? }. No value and oldValue for the &quot;geometry&quot; property.</li></ul><p>Events can be listened using <code>scene.on</code>:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;model-added&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">model</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">A model is loaded with the id </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>model<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="styles"><a class="header-anchor" href="#styles">#</a> Styles</h2><p>Styles define how objects are drawn by default when they are visible, selected and highlighted. It can be customized by changing the default styles (WARNING: updating styles.default won&#39;t affect already loaded objects) or loading objects with non default style.</p><p>A style has the following interface:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Style</span> <span class="token punctuation">{</span>
  <span class="token comment">// TEXTURE</span>
  texture<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  textureTint<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  textureOpacity<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token comment">// LINE</span>
  lineWidth<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  lineColor<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  lineOpacity<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  lineDash<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  lineCap<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">LINE_CAP</span><span class="token punctuation">;</span>
  lineJoin<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">LINE_JOIN</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token constant">LINE_CAP</span> <span class="token punctuation">{</span>
  <span class="token constant">BUTT</span><span class="token punctuation">,</span>
  <span class="token constant">ROUND</span><span class="token punctuation">,</span>
  <span class="token constant">SQUARE</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token constant">LINE_JOIN</span> <span class="token punctuation">{</span>
  <span class="token constant">BEVEL</span><span class="token punctuation">,</span>
  <span class="token constant">MITER</span><span class="token punctuation">,</span>
  <span class="token constant">ROUND</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>You can change <code>textureTint</code> and <code>lineColor</code> using hexadecimal numbers.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>styles<span class="token punctuation">.</span>default<span class="token punctuation">.</span>textureTint <span class="token operator">=</span> <span class="token number">0xff0000</span><span class="token punctuation">;</span> <span class="token comment">// For red. (RGB)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><code>textureOpacity</code> and <code>lineOpacity</code> are numbers between 0 and 1.</p><p><code>lineDash</code> is an array of numbers describing the dash pattern you want to use. See <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#parameters" target="_blank" rel="noopener noreferrer">here<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> for more informations.</p><h2 id="texture-manager"><a class="header-anchor" href="#texture-manager">#</a> Texture Manager</h2><p>The Texture Manager has the following interface:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">TextureManager</span> <span class="token punctuation">{</span>
  textureMatrix<span class="token operator">:</span> TextureMatrix<span class="token punctuation">;</span>
  <span class="token function">load</span><span class="token punctuation">(</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    src<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    width<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
    height<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>
  <span class="token punctuation">)</span><span class="token operator">:</span> Nullable<span class="token operator">&lt;</span>Object<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// and the interface of the texture matrix</span>
<span class="token keyword">interface</span> <span class="token class-name">TextureMatrix</span> <span class="token punctuation">{</span>
  <span class="token function">rotate</span><span class="token punctuation">(</span>angle<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">scale</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">translate</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>The viewer only have &quot;solid&quot; texture built in but it is possible to load more:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">await</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>textureManager<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>
  <span class="token string">&quot;myTextureName&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;./my/textures/folder/myTexture.png&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>NOTE: this is async code and must be awaited in order to the texture to ba available in the viewer.</p><p>This is what you can get: (wall are textured using a cross hatch texture)</p><img src="/assets/img/wallTextureRaw.png" alt="wall texture raw" width="400" height="300"><p>Notice that the textrure is aligned with the axis. If the model is not aligned with the axis, you can use the Texture Manager textureMatrix to rotate the textures.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span>textureManager<span class="token punctuation">.</span>textureMatrix<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><img src="/assets/img/wallTextureRotated.png" alt="wall texture rotated" width="400" height="300"><h2 id="model-and-objects"><a class="header-anchor" href="#model-and-objects">#</a> Model and Objects</h2><h3 id="model"><a class="header-anchor" href="#model">#</a> Model</h3><p>To add a model to the scene, use the <code>scene.addModel(modelData: ModelData)</code> method.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ModelData</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> id<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> objects<span class="token operator">?</span><span class="token operator">:</span> SceneObjectData<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Model</span> <span class="token keyword">extends</span> <span class="token class-name">Positionable</span><span class="token punctuation">,</span> Transformable <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> scene<span class="token operator">:</span> Scene<span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> objects<span class="token operator">:</span> SceneObject<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">addObject</span><span class="token punctuation">(</span>objectData<span class="token operator">:</span> SceneObjectData<span class="token punctuation">)</span><span class="token operator">:</span> SceneObject<span class="token punctuation">;</span>
  <span class="token function">removeObject</span><span class="token punctuation">(</span>objectId<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="object"><a class="header-anchor" href="#object">#</a> Object</h3><p>To add object to the scene, you can use the <code>scene.addObject(objectData: ObjectData)</code> or the <code>model.addObject(objectData: ObjectData)</code> methods, or add it through models.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">SceneObjectData</span> <span class="token keyword">extends</span> <span class="token class-name">Style</span> <span class="token punctuation">{</span>
  visible<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  selected<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  highlighted<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  pickable<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> id<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> zIndex<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> pickingZIndex<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> geometry<span class="token operator">?</span><span class="token operator">:</span> GeometryData<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">SceneObject</span> <span class="token keyword">extends</span> <span class="token class-name">Style</span><span class="token punctuation">,</span> Positionable<span class="token punctuation">,</span> Transformable <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> scene<span class="token operator">:</span> Scene<span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> model<span class="token operator">:</span> Model<span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> geometry<span class="token operator">:</span> Geometry<span class="token punctuation">;</span>

  <span class="token comment">// Scene state properties</span>
  visible<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  selected<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  highlighted<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  pickable<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>Objects extends the <a href="#styles"><code>Style</code></a> interface. Each object style properties can be updated on the fly leading to a new render.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>object<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="geometry"><a class="header-anchor" href="#geometry">#</a> Geometry</h3><p>Objects have <code>geometry</code> and a <code>geometry</code> is an array of <code>shape</code>.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name">GeometryData</span> <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> LineData <span class="token operator">|</span> ArcData <span class="token operator">|</span> CurveData<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">ShapeData</span> <span class="token punctuation">{</span>
  <span class="token keyword">type</span><span class="token operator">?</span><span class="token operator">:</span> ShapeType<span class="token punctuation">;</span>
  closePath<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token comment">// If true, the path is closed after this shape and another path is opened for the following shapes. Equivalent of the svg command &quot;Z&quot;.</span>
  startPath<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token comment">// If true, a new path is started before drawing this shape.Equivalent of the svg command &quot;M&quot;.</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Geometry</span> <span class="token keyword">extends</span> <span class="token class-name">Positionable</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> shapes<span class="token operator">:</span> Shape<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">getShape</span><span class="token punctuation">(</span>index<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> Shape <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  <span class="token function">addShape</span><span class="token punctuation">(</span>shape<span class="token operator">:</span> ShapeData <span class="token operator">|</span> PointsData<span class="token punctuation">,</span> index<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> Shape<span class="token punctuation">;</span>
  <span class="token function">removeShape</span><span class="token punctuation">(</span>index<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> Shape <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="path-api"><a class="header-anchor" href="#path-api">#</a> Path API</h4><p>By default, each shapes are drawn like a single path (linked together without stoping the drawing line). But this behaviour can be changed using the <code>startPath</code> and <code>closePath</code> booleans. The default value for <code>startPath</code> is <code>false</code> except for the first shape and the shapes that followed a shape with <code>closePath</code> at <code>true</code>. The default value for <code>closePath</code> is <code>false</code>.</p><p>Here is an example of these APIs.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> object <span class="token operator">=</span>  <span class="token punctuation">{</span>
  geometry<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">&quot;line&quot;</span><span class="token punctuation">,</span>
      points<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">350</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      startPath<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">&quot;line&quot;</span><span class="token punctuation">,</span>
      points<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">350</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      startPath<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">&quot;line&quot;</span><span class="token punctuation">,</span>
      points<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">350</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      startPath<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">&quot;arc&quot;</span><span class="token punctuation">,</span>
      x<span class="token operator">:</span> <span class="token number">350</span><span class="token punctuation">,</span>
      y<span class="token operator">:</span> <span class="token number">250</span><span class="token punctuation">,</span>
      radius<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
      startPath<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      closePath<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  texture<span class="token operator">:</span> <span class="token string">&quot;solid&quot;</span><span class="token punctuation">,</span>
  textureTint<span class="token operator">:</span> <span class="token number">0xff0000</span><span class="token punctuation">,</span>
  textureOpacity<span class="token operator">:</span> <span class="token number">0.5</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>This object is drawn like this:</p><img src="/assets/img/pathAPI_with.png" alt="with path API" height="300"><p>If the <code>startPath</code> propertiy is removed:</p><img src="/assets/img/pathAPI_without.png" alt="without path API" height="300"><p>In this example, the <code>closePath</code> property helps the drawing engine to correctly close the cirle.</p><h4 id="add-geometry"><a class="header-anchor" href="#add-geometry">#</a> Add geometry</h4><p>When adding objects on a scene, shapes can be provide to object using the geometry property. By default, array of numbers will be displayed as lines.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> model <span class="token operator">=</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">addModel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  objects<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      geometry<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// a line</span>
        <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">&quot;line&quot;</span><span class="token punctuation">,</span> <span class="token comment">// another line</span>
          points<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token comment">// poly: true // if poly = true, the shape is closed between the last point and the first.</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">&quot;arc&quot;</span><span class="token punctuation">,</span> <span class="token comment">// a default arc =&gt; full circle</span>
          x<span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
          y<span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
          radius<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Geometries can be edited on the fly. To see how, <a href="https://codepen.io/kurtil/pen/qBXjRqK" target="_blank" rel="noopener noreferrer">try it here<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</p></div><p>The viewer handle three shape types: <code>line</code>, <code>arc</code> and <code>curve</code>.</p><h4 id="line"><a class="header-anchor" href="#line">#</a> Line</h4><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">LineData</span> <span class="token keyword">extends</span> <span class="token class-name">ShapeData</span> <span class="token punctuation">{</span>
  <span class="token keyword">type</span><span class="token operator">:</span> ShapeType<span class="token punctuation">.</span>line<span class="token punctuation">;</span>
  points<span class="token operator">:</span> PointsData<span class="token punctuation">;</span>
  poly<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Line</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token keyword">type</span><span class="token operator">:</span> ShapeType<span class="token punctuation">.</span>line<span class="token punctuation">;</span>
  <span class="token keyword">readonly</span> points<span class="token operator">:</span> Point<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token function">getPoint</span><span class="token punctuation">(</span>index<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> Point <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  <span class="token function">addPoint</span><span class="token punctuation">(</span>point<span class="token operator">:</span> Point<span class="token punctuation">,</span> index<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> Point<span class="token punctuation">;</span>
  <span class="token function">removePoint</span><span class="token punctuation">(</span>index<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> Point <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="arc"><a class="header-anchor" href="#arc">#</a> Arc</h4><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">ArcData</span> <span class="token keyword">extends</span> <span class="token class-name">ShapeData</span> <span class="token punctuation">{</span>
  <span class="token keyword">type</span><span class="token operator">:</span> ShapeType<span class="token punctuation">.</span>arc<span class="token punctuation">;</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  radius<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  startAngle<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// (0 is at the 3 o&#39;clock position of the arc&#39;s circle)</span>
  endAngle<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  anticlockwise<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  composite<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token comment">// default to `false`, `true` to be linked with the previous shape.</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Arc</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token keyword">type</span><span class="token operator">:</span> ShapeType<span class="token punctuation">.</span>arc<span class="token punctuation">;</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  radius<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  startAngle<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// Degrees from the right of the arc.</span>
  endAngle<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// Degrees from the right of the arc.</span>
  anticlockwise<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="curve"><a class="header-anchor" href="#curve">#</a> Curve</h4><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">CurveData</span> <span class="token keyword">extends</span> <span class="token class-name">ShapeData</span> <span class="token punctuation">{</span>
  <span class="token keyword">type</span><span class="token operator">:</span> ShapeType<span class="token punctuation">.</span>curve<span class="token punctuation">;</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  cpX1<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  cpY1<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  cpX2<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  cpY2<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  toX<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  toY<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Curve</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token keyword">readonly</span> <span class="token keyword">type</span><span class="token operator">:</span> ShapeType<span class="token punctuation">.</span>curve<span class="token punctuation">;</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  cpX1<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  cpY1<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  cpX2<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  cpY2<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  toX<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  toY<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="positionable-transformable"><a class="header-anchor" href="#positionable-transformable">#</a> Positionable &amp; Transformable</h3><p>These APIs allows to get and update the position of the corresponding entity:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">type</span> <span class="token class-name"><span class="token constant">AABB</span></span> <span class="token operator">=</span> <span class="token punctuation">[</span>minX<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> minY<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> maxX<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> maxY<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">interface</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Positionable</span> <span class="token punctuation">{</span>
  aabb<span class="token operator">:</span> <span class="token constant">AABB</span><span class="token punctuation">;</span>
  center<span class="token operator">:</span> Point<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Transformable</span> <span class="token punctuation">{</span>
  <span class="token function">move</span><span class="token punctuation">(</span>position<span class="token operator">:</span> Point<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">translate</span><span class="token punctuation">(</span>dx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> dy<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token doc-comment comment">/**
   * <span class="token keyword">@param</span> <span class="token parameter">angle</span> in degree, clockwise
   * <span class="token keyword">@param</span> <span class="token parameter">origin</span>
   */</span>
  <span class="token function">rotate</span><span class="token punctuation">(</span>angle<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> origin<span class="token operator">?</span><span class="token operator">:</span> Point<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">scale</span><span class="token punctuation">(</span>ds<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> origin<span class="token operator">?</span><span class="token operator">:</span> Point<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="ui"><a class="header-anchor" href="#ui">#</a> UI</h2><p>The UI is the only component connected to a DOM element, listening to events. It has the following interface:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">UI</span></span> <span class="token keyword">extends</span> <span class="token class-name">EventHandler<span class="token operator">&lt;</span>UIHandlerEvents<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token function">connect</span><span class="token punctuation">(</span>el<span class="token operator">:</span> HTMLElement<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>The <code>camera</code> and the <code>picker</code> listen to the UI events. Disconnecting the UI will make them not reactive to user interactions.</p><h3 id="events-1"><a class="header-anchor" href="#events-1">#</a> Events</h3><ul><li>&quot;click&quot;, payload: { canvasPosition, keys }</li><li>&quot;right-click&quot;, payload: { canvasPosition, keys }</li><li>&quot;move&quot;, payload: { canvasPosition, keys }</li><li>&quot;drag&quot;, payload: { dx, dy, keys }</li><li>&quot;scroll&quot;, payload: { canvasPosition, dx, dy, keys }</li><li>&quot;exit&quot;, no payload, when the mouse leave <code>el</code>.</li></ul><h2 id="camera"><a class="header-anchor" href="#camera">#</a> Camera</h2><p>The camera is binded on the mouse events. It has the following interface:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token doc-comment comment">/**
 * A camera allows to see the world. Two coordinate systems can be manipulated using it:
 * - the world coordinates, mentionned as `position`.
 * - the canvas coordinates, mentionned as `canvasPosition`.
 *
 * A camera emits events:
 * - &quot;update&quot;, payload <span class="token punctuation">{</span> MatrixExtended <span class="token punctuation">}</span> : the camera transform. Emited when the camera is updated.
 *
 * To express the zoom level, the camera has two units:
 * - zoom, expressed in percentages, as 100 times the scale.
 * - scale ]0,+Infitiy[.
 *
 */</span>
<span class="token keyword">interface</span> <span class="token class-name">Camera</span>
  <span class="token keyword">extends</span> <span class="token class-name">Transformable</span><span class="token punctuation">,</span>
    Readonly<span class="token operator">&lt;</span>EventHandler<span class="token operator">&lt;</span><span class="token punctuation">{</span> update<span class="token operator">:</span> PIXITransform <span class="token punctuation">}</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">fitView</span><span class="token punctuation">(</span>
    target<span class="token operator">:</span> Scene <span class="token operator">|</span> Scene<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> Model <span class="token operator">|</span> Model<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> SceneObject <span class="token operator">|</span> SceneObject<span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  controller<span class="token operator">:</span> CameraController<span class="token punctuation">;</span>
  <span class="token doc-comment comment">/**
   * <span class="token keyword">@param</span> <span class="token parameter">factor</span> ]-Infinity, +Infinity[
   * <span class="token keyword">@param</span> <span class="token parameter">origin</span> the zoom transform center.
   */</span>
  <span class="token function">zoomIn</span><span class="token punctuation">(</span>factor<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> origin<span class="token operator">?</span><span class="token operator">:</span> Point<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token doc-comment comment">/**
   * <span class="token keyword">@param</span> <span class="token parameter">factor</span> ]-Infinity, +Infinity[
   * <span class="token keyword">@param</span> <span class="token parameter">origin</span> the zoom transform center.
   */</span>
  <span class="token function">zoomOut</span><span class="token punctuation">(</span>factor<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> origin<span class="token operator">?</span><span class="token operator">:</span> Point<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  <span class="token doc-comment comment">/**
   * <span class="token keyword">@param</span> <span class="token parameter">angle</span> in degree clockwise.
   * <span class="token keyword">@param</span> <span class="token parameter">origin</span> the rotation transform center.
   */</span>
  transform<span class="token operator">:</span> PIXIMatrix<span class="token punctuation">;</span>
  position<span class="token operator">:</span> Point<span class="token punctuation">;</span>
  <span class="token doc-comment comment">/**
   * <span class="token keyword">@returns</span> <span class="token punctuation">{</span> number <span class="token punctuation">}</span> the camera rotation angle in degree clockwise.
   */</span>
  rotation<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token doc-comment comment">/**
   * <span class="token keyword">@returns</span> <span class="token punctuation">{</span> number <span class="token punctuation">}</span> ]-Infinity, +Infinity[
   */</span>
  <span class="token function">getScale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token doc-comment comment">/**
   * <span class="token keyword">@returns</span> <span class="token punctuation">{</span> number <span class="token punctuation">}</span> ]0, +Infinity[
   */</span>
  zoom<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token doc-comment comment">/**
   * Returns the position of the given canvas position.
   */</span>
  <span class="token function">getPosition</span><span class="token punctuation">(</span>canvasPosition<span class="token operator">:</span> Point<span class="token punctuation">)</span><span class="token operator">:</span> Point<span class="token punctuation">;</span>
  <span class="token doc-comment comment">/**
   * Returns the canvas position of the given position.
   */</span>
  <span class="token function">getCanvasPosition</span><span class="token punctuation">(</span>position<span class="token operator">:</span> Point<span class="token punctuation">)</span><span class="token operator">:</span> Point<span class="token punctuation">;</span>
  <span class="token function">getViewpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Viewpoint<span class="token punctuation">;</span>
  <span class="token function">setViewpoint</span><span class="token punctuation">(</span>viewpoint<span class="token operator">:</span> Viewpoint<span class="token punctuation">)</span><span class="token operator">:</span> Viewpoint<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Viewpoint</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token doc-comment comment">/**
   * degree clockwise
   */</span>
  rotation<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token doc-comment comment">/**
   * ]-Infinity, +Infinity[
   */</span>
  zoom<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br></div></div><p>It is possible to customise the camera behaviour by changing the properties of the <code>camera.controller</code> that has the following interface:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">CameraController</span> <span class="token punctuation">{</span>
  translatable<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  rotatable<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  scallable<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>All properties are <code>true</code> by default.</p><h2 id="picker"><a class="header-anchor" href="#picker">#</a> Picker</h2><p>The picker allows to get objects under the mouse pointer.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Picker</span> <span class="token keyword">extends</span> <span class="token class-name">Readonly<span class="token operator">&lt;</span>EventHandler<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token function">pick</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> SceneObject <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>You may be mainly interseted by the picker events:</p><ul><li>&quot;pick&quot;, payload : { object, position, keys, rightClick: boolean }</li><li>&quot;pick-nothing&quot;, payload: { position, keys, rightClick: boolean }</li><li>&quot;hover-surface&quot;, payload: { object, position }</li><li>&quot;hover&quot;, payload: { object, position }</li><li>&quot;hover-out&quot;, payload: { object, position }</li><li>&quot;hover-off&quot;, payload: { position }</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span>controller<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;pick&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> object <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  object<span class="token punctuation">.</span>selected <span class="token operator">=</span> <span class="token operator">!</span>object<span class="token punctuation">.</span>selected<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="snapper"><a class="header-anchor" href="#snapper">#</a> Snapper</h2><p>The snapper allows to get a line vertex or edge position close to the given canvas position:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Snapper</span> <span class="token punctuation">{</span>
  <span class="token function">getSnap</span><span class="token punctuation">(</span>canvasPosition<span class="token operator">:</span> Point<span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> SnapOptions<span class="token punctuation">)</span><span class="token operator">:</span> Point<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">SnapOptions</span> <span class="token punctuation">{</span>
  canvasDistance<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// default 20</span>
  snapVertices<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token comment">// default true</span>
  snapLines<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span> <span class="token comment">// default true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Example to move a object close to another with the snap:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> object <span class="token operator">=</span> viewer<span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">/* scene object data */</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

viewer<span class="token punctuation">.</span>ui<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;move&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> canvasPosition <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> point <span class="token operator">=</span> viewer<span class="token punctuation">.</span>snapper<span class="token punctuation">.</span><span class="token function">getSnap</span><span class="token punctuation">(</span>canvasPosition<span class="token punctuation">)</span><span class="token punctuation">;</span>

    object<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>point <span class="token operator">??</span> viewer<span class="token punctuation">.</span>camera<span class="token punctuation">.</span><span class="token function">getPosition</span><span class="token punctuation">(</span>canvasPosition<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="settings"><a class="header-anchor" href="#settings">#</a> Settings</h2><p>Settings are predefined values/keys that define the 2D Engine behaviour. It has the following interface:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Settings</span> <span class="token punctuation">{</span>
  rotateKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span> <span class="token comment">// default &quot;shift&quot;</span>
  scaleSpeed<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// default 0.002</span>
  rotateSpeed<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// default 0.1</span>
  maxScale<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// default 1000</span>
  minScale<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// default 0.001</span>
  fitViewRatio<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// default 0.9</span>
  snapMargin<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span> <span class="token comment">// default 1</span>
  curves<span class="token operator">:</span> <span class="token punctuation">{</span>
    adaptive<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    maxLength<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    maxSegments<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    minSegments<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="ticker"><a class="header-anchor" href="#ticker">#</a> Ticker</h2><p>Use <code>viewer.ticker.start/stop()</code> to start or stop the rendering.</p><p>Use <code>viewer.ticker.add/addOnce(name: string, callBack: Function)</code> to schedule a callback on the next tick. The callback will be called with <code>dt</code>, the delta time since the next tick. WARNING: adding many tasks with the same name will overide the previous tasks and only the last added will be called on the next tick. This can be used to do not overdue a callback that must be done only once per tick.</p><h2 id="renderer"><a class="header-anchor" href="#renderer">#</a> Renderer</h2><p>Renderer emits events you can use for addons:</p><ul><li>&quot;resize&quot;, payload: { dx: number, dy: number }. Emited when the renderer resizes.</li><li>&quot;pre-draw&quot;. Emited before the draw phase.</li><li>&quot;post-draw&quot;. Emited after the draw phase.</li></ul><h2 id="vector2dutils"><a class="header-anchor" href="#vector2dutils">#</a> Vector2DUtils</h2><p>It exposes some methods to work with 2D vectors:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Vector2DUtils</span> <span class="token punctuation">{</span>
  <span class="token function">distance</span><span class="token punctuation">(</span>v1<span class="token operator">:</span> Vector2D<span class="token punctuation">,</span> v2<span class="token operator">:</span> Vector2D<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function">sub</span><span class="token punctuation">(</span>v1<span class="token operator">:</span> Vector2D<span class="token punctuation">,</span> v2<span class="token operator">:</span> Vector2D<span class="token punctuation">)</span><span class="token operator">:</span> Vector2D<span class="token punctuation">;</span>
  <span class="token function">add</span><span class="token punctuation">(</span>v1<span class="token operator">:</span> Vector2D<span class="token punctuation">,</span> v2<span class="token operator">:</span> Vector2D<span class="token punctuation">)</span><span class="token operator">:</span> Vector2D<span class="token punctuation">;</span>
  <span class="token function">normalize</span><span class="token punctuation">(</span>v<span class="token operator">:</span> Vector2D<span class="token punctuation">)</span><span class="token operator">:</span> Vector2D<span class="token punctuation">;</span>
  <span class="token function">length</span><span class="token punctuation">(</span>v<span class="token operator">:</span> Vector2D<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function">dot</span><span class="token punctuation">(</span>v1<span class="token operator">:</span> Vector2D<span class="token punctuation">,</span> v2<span class="token operator">:</span> Vector2D<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function">cross</span><span class="token punctuation">(</span>v1<span class="token operator">:</span> Vector2D<span class="token punctuation">,</span> v2<span class="token operator">:</span> Vector2D<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token function">rotateAround</span><span class="token punctuation">(</span>v<span class="token operator">:</span> Vector2D<span class="token punctuation">,</span> center<span class="token operator">:</span> Vector2D<span class="token punctuation">,</span> angle<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> Vector2D<span class="token punctuation">;</span>
  <span class="token function">angle</span><span class="token punctuation">(</span>v1<span class="token operator">:</span> Vector2D<span class="token punctuation">,</span> v2<span class="token operator">:</span> Vector2D<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>Angles are expressed in radians in <code>Vector2DUtils</code>.</p></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/bimdata/2d-engine-documentation/edit/main/reference/README.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">1/18/2022, 8:49:00 AM</span></div><!----></footer><!----><!--[--><!--]--></main></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.7b1596e0.js" defer></script><script src="/assets/js/346.9389faae.js" defer></script><script src="/assets/js/app.64756ebe.js" defer></script>
  </body>
</html>
